{% extends 'base.html' %}
{% block content %}
<div class="layout">
  <main class="main-col">
    <div class="card">
      <div style="display: flex; gap: 24px; margin-bottom: 24px;">
        <!-- Book Cover -->
        {% if book.cover_url %}
        <div style="flex-shrink: 0;">
          <img src="{{ book.cover_url }}" alt="{{ book.title }}" class="book-cover-detail" 
               style="width: 200px; height: auto; border-radius: 4px; box-shadow: 0 2px 8px rgba(0,0,0,0.15);" 
               onerror="this.style.display='none'" />
        </div>
        {% endif %}

        <!-- Book Info -->
        <div style="flex: 1;">
          <h1 style="margin: 0 0 8px 0; font-size: 32px; color: #333;">{{ book.title }}</h1>
          
          <!-- Author Link -->
          <p style="margin: 0 0 16px 0; font-size: 18px;">
            <span style="color: #666;">by</span>
            {% if book.author %}
            <a href="{{ url_for('author_detail', author_id=book.author.id) }}" style="color: #2196F3; text-decoration: none; font-weight: bold;">
              {{ book.author.name }}
            </a>
            {% else %}
            <span style="font-weight: bold; color: #999;">Unknown Author</span>
            {% endif %}
          </p>

          <!-- Book Metadata -->
          <div style="background-color: #f5f5f5; padding: 16px; border-radius: 4px; margin-bottom: 16px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
              {% if book.isbn %}
              <div>
                <p style="margin: 0; color: #666; font-size: 12px; font-weight: bold; text-transform: uppercase;">ISBN</p>
                <p style="margin: 8px 0 0 0; font-size: 16px; font-family: monospace;">{{ book.isbn }}</p>
              </div>
              {% endif %}

              {% if book.publication_year %}
              <div>
                <p style="margin: 0; color: #666; font-size: 12px; font-weight: bold; text-transform: uppercase;">Publication Year</p>
                <p style="margin: 8px 0 0 0; font-size: 16px;">{{ book.publication_year }}</p>
              </div>
              {% endif %}
            </div>
          </div>

          <!-- Action Buttons -->
          <div style="display: flex; gap: 8px; flex-wrap: wrap;">
            <form method="POST" action="{{ url_for('delete_book', book_id=book.id) }}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this book?');">
              <button type="submit" class="btn btn-danger" style="background-color:#d9534f; color:white; border:none; padding:10px 16px; border-radius:4px; cursor:pointer;">
                <i class="fa fa-trash"></i> Delete Book
              </button>
            </form>
            <a href="{{ url_for('home') }}" class="btn" style="background-color: #6c757d; color: white; text-decoration: none; padding: 10px 16px; border-radius: 4px; display: inline-block;">
              <i class="fa fa-arrow-left"></i> Back to Library
            </a>
          </div>
        </div>
      </div>

      <hr style="margin: 24px 0; border: none; border-top: 1px solid #ddd;">

      <!-- Additional Details Section -->
      <div style="background-color: #f9f9f9; padding: 16px; border-radius: 4px;">
        <h3 style="margin: 0 0 12px 0; color: #333;">üìö Book Information</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 14px;">
          <div>
            <p style="margin: 0; color: #666;"><strong>Title:</strong> {{ book.title }}</p>
          </div>
          {% if book.author %}
          <div>
            <p style="margin: 0; color: #666;"><strong>Author:</strong> 
              <a href="{{ url_for('author_detail', author_id=book.author.id) }}" style="color: #2196F3; text-decoration: none;">
                {{ book.author.name }}
              </a>
            </p>
          </div>
          {% endif %}
          {% if book.publication_year %}
          <div>
            <p style="margin: 0; color: #666;"><strong>Year:</strong> {{ book.publication_year }}</p>
          </div>
          {% endif %}
          {% if book.isbn %}
          <div>
            <p style="margin: 0; color: #666;"><strong>ISBN:</strong> {{ book.isbn }}</p>
          </div>
          {% endif %}
          {% if book.cover_url %}
          <div>
            <p style="margin: 0; color: #666;"><strong>Cover URL:</strong> <a href="{{ book.cover_url }}" target="_blank" style="color: #2196F3; text-decoration: none; word-break: break-all;">{{ book.cover_url }}</a></p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>
  </main>

  <!-- Sidebar with Related Info -->
  <aside class="side-col">
    <div class="card">
      <h3 style="margin: 0 0 12px 0;">üìñ Book ID</h3>
      <p style="margin: 0; font-family: monospace; font-size: 16px; color: #2196F3; font-weight: bold;">{{ book.id }}</p>
    </div>

    {% if book.author %}
    <div class="card">
      <h3 style="margin: 0 0 12px 0;">‚úçÔ∏è Author</h3>
      <p style="margin: 0 0 8px 0; font-size: 16px; font-weight: bold;">
        <a href="{{ url_for('author_detail', author_id=book.author.id) }}" style="color: #2196F3; text-decoration: none;">
          {{ book.author.name }}
        </a>
      </p>
      {% if book.author.birth_date %}
      <p style="margin: 0; font-size: 12px; color: #666;">Born: {{ book.author.birth_date }}</p>
      {% endif %}
      {% if book.author.date_of_death %}
      <p style="margin: 0; font-size: 12px; color: #666;">Died: {{ book.author.date_of_death }}</p>
      {% endif %}
      <p style="margin: 8px 0 0 0; font-size: 12px; color: #666;">{{ book.author.books|length }} book{{ 's' if book.author.books|length != 1 }} in library</p>
    </div>
    {% endif %}

    <div class="card aside-links">
      <h3 style="margin: 0 0 12px 0;">Quick Links</h3>
      <p><a class="btn" href="{{ url_for('home') }}"><i class="fa fa-home"></i> Library</a></p>
      <p><a class="btn" href="{{ url_for('add_book') }}"><i class="fa fa-plus"></i> Add Book</a></p>
    </div>
  </aside>
</div>
{% endblock %}
