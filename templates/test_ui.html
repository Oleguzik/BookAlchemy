{% extends 'base.html' %}
{% block content %}
<div class="layout">
  <main class="main-col">
    <div class="card">
      <h2>Admin — Authors & Books</h2>
      <p class="meta">This is a test UI used in development; edit/delete actions are provided for convenience.</p>
      <h3>Authors</h3>
      {% if authors %}
        <ul>
        {% for a in authors %}
          <li>
            <strong>{{ a.name }}</strong> — {{ a.birth_date or '' }} {% if a.date_of_death %}&ndash; {{ a.date_of_death }}{% endif %}
            <span class="meta">({{ a.books|length }} books)</span>
            <form method="post" action="{{ url_for('admin_delete_author', author_id=a.id) }}" style="display:inline">
              <button class="btn small" type="submit" onclick="return confirm('Delete author? All their books will be removed.')">Delete</button>
            </form>
            <a class="btn small" href="{{ url_for('add_author', author_id=a.id, sort='title') }}">Edit</a>
          </li>
        {% endfor %}
        </ul>
      {% else %}
        <p>No authors yet.</p>
      {% endif %}
      <hr />
      <h3>Books</h3>
      {% if books %}
        <ul>
        {% for b in books %}
          <li>
            <strong>{{ b.title }}</strong> — {{ b.author.name if b.author else 'Unknown' }} <span class="meta">({{ b.publication_year or '?' }})</span>
            <form method="post" action="{{ url_for('admin_delete_book', book_id=b.id) }}" style="display:inline">
              <button class="btn small" type="submit" onclick="return confirm('Delete book?')">Delete</button>
            </form>
            <a class="btn small" href="{{ url_for('add_book', book_id=b.id) }}">Edit</a>
          </li>
        {% endfor %}
        </ul>
      {% else %}
        <p>No books yet.</p>
      {% endif %}
    </div>
  </main>
  <aside class="side-col">
    <div class="card aside-links">
      <h3>Actions</h3>
      <p><a class="btn" href="{{ url_for('home') }}">Back to home</a></p>
    </div>
  </aside>
</div>
{% endblock %}
